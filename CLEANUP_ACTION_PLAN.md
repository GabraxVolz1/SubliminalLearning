# Post-Cleanup Action Plan

## Current State

✅ **Done:**
- Removed outdated README files (README_v2.md, README_old.md)
- Removed legacy documentation (CLAUDE.md)
- Removed 6 legacy scripts that are not used by role-assume framework
- Created new role-assume focused README.md
- Created comprehensive PROJECT_AUDIT.md
- Created CLEANUP_SUMMARY.md

## What Remains (Legacy Code, Not Breaking)

These are still in the repository but NOT used by the role-assume experiment:

### 1. `cfgs/` Directory (Can Be Safely Deleted)
- Contains configuration files for the old workflow (finetune + evaluate)
- Used only by deleted scripts
- **Decision:** DELETE (unless you want to preserve for reference)

```bash
rm -rf cfgs/
```

### 2. `test/` Directory (Partial Legacy)
- Tests for old `sl/` library modules
- Not used by role-assume framework
- **Decision:** DELETE if you don't need them; KEEP if you want test coverage

```bash
# Full removal:
rm -rf test/

# Or keep for reference:
# No action needed
```

### 3. `sl/` Directory (Library, Partially Used)
- Legacy library with many unused modules
- Used by: `generate_teacher_conversations.py` (imports `sl.datasets.nums_dataset`)
- NOT used by: `run_student_roleplay.py`, `ablation_driver.py`
- **Decision:** KEEP (used by teacher generation), but could be refactored

**Current imports from `sl/`:**
```python
# In generate_teacher_conversations.py:
from sl.datasets.nums_dataset import (
    PromptGenerator,
    extract_format_suffix,
    parse_response,
    format_numbers,
)
```

**Optional refactoring:** Move `nums_dataset.py` to `utils/` and remove unused `sl/` modules.

### 4. `wandb/` Directory (Experiment Logs)
- Contains old experiment runs and logs
- Not used by current code
- **Decision:** DELETE (or archive if you want history)

```bash
rm -rf wandb/
```

### 5. `data/` Directory (Old Experiment Data)
- Likely contains output from old experiments
- Not used by current code
- **Decision:** DELETE (data will be regenerated by role-assume scripts)

```bash
rm -rf data/
```

### 6. `.claude/` Directory (Hidden, Likely Empty)
- Artifact from VS Code AI tools
- **Decision:** DELETE

```bash
rm -rf .claude/
```

### 7. `.env.template` (Old Configuration Template)
- References old OpenAI/HF config for legacy scripts
- Optional for role-assume (no env vars strictly required)
- **Decision:** DELETE or UPDATE (if you want to add role-assume specific config)

---

## Recommended Cleanup Sequence

### Phase 1: Aggressive Cleanup (Immediate, Safe)
```bash
cd /home/gabrivol/subliminal-learning
rm -rf cfgs/          # Old configs
rm -rf wandb/         # Old logs
rm -rf .claude/       # VS Code AI artifacts
rm -f .env.template   # Old template (optional)
```

**Impact:** Zero impact on role-assume framework. Project is cleaner.

**Time to undo:** If needed, `git restore cfgs/` etc.

### Phase 2: Optional Cleanup (Later, If You're Sure)
```bash
rm -rf test/          # Remove old tests (if you don't need them)
rm -rf data/          # Remove old data (regenerated automatically)
```

**Impact:** Slightly smaller repo. No functional change to role-assume.

### Phase 3: Optional Refactoring (Advanced, If You Want)
```bash
# Move nums_dataset utilities out of sl/
mkdir -p utils/
mv sl/datasets/nums_dataset.py utils/
# Update imports in generate_teacher_conversations.py
# Delete remaining unused sl/ modules
```

**Impact:** Cleaner dependencies, but more work.

---

## Recommended Decision: Phase 1 Only

**Why:**
- Safe (no code dependencies)
- Removes obvious clutter
- Keeps useful things like `sl/` for potential future use
- Can always do Phase 2 later

**Commands:**
```bash
cd /home/gabrivol/subliminal-learning
rm -rf cfgs/ wandb/ .claude/
# Optional: rm -f .env.template
```

**Result:**
```
Before: 15 directories, 200+ files
After:  12 directories, ~100 files (much cleaner!)
```

---

## Files You Should KEEP

### Essential
- ✅ `scripts/` (4 scripts: role-assume related)
- ✅ `notebooks/role_assume_ablation.ipynb`
- ✅ `README.md` (new, role-assume focused)
- ✅ `pyproject.toml` (dependencies)
- ✅ `pyrightconfig.json` (type checking)

### Documentation (Keep)
- ✅ `ROLE_ASSUME_FINAL_SUMMARY.md`
- ✅ `ROLE_ASSUME_EXPERIMENT.md`
- ✅ `PROJECT_AUDIT.md`
- ✅ `CLEANUP_SUMMARY.md` (this project organization)

### Library (Keep, But Partial)
- ✅ `sl/datasets/nums_dataset.py` (used by generate_teacher_conversations.py)
- ❓ Rest of `sl/` (not used, but harmless)

### Git & Config (Keep)
- ✅ `.git/` (git history)
- ✅ `.gitignore`
- ✅ `.pre-commit-config.yaml`
- ✅ `.python-version`
- ✅ `pyrightconfig.json`
- ✅ `ruff.toml`
- ✅ `uv.lock` (lock file for dependencies)

### Directories (Status)
- ✅ `scripts/` — 4 files, all essential
- ✅ `notebooks/` — 1 file, essential
- ⚠️ `sl/` — Keep for now, refactor later if needed
- ⚠️ `results/` — Empty by default, populated by experiments
- ❓ `sl.egg-info/` — Auto-generated, safe to delete
- ❌ `cfgs/` — DELETE (not used)
- ❌ `wandb/` — DELETE (old logs)
- ❌ `test/` — DELETE or KEEP (no impact on code)
- ❌ `data/` — DELETE or KEEP (not used by code)
- ❌ `.claude/` — DELETE (artifact)

---

## Final Recommendation: Cleanup Commands

```bash
#!/bin/bash
cd /home/gabrivol/subliminal-learning

# Phase 1: Safe cleanup (RECOMMENDED)
echo "Removing legacy configs, logs, and artifacts..."
rm -rf cfgs/
rm -rf wandb/
rm -rf .claude/
rm -f .env.template

# Optional: Phase 2 cleanup (only if sure)
# echo "Removing old tests and data..."
# rm -rf test/
# rm -rf data/
# rm -rf sl.egg-info/

echo "Done! Repository cleaned up."
echo ""
echo "Remaining structure:"
find . -maxdepth 2 -type d \( ! -name '.*' \) | sort
```

---

## How to Verify Everything Works After Cleanup

```bash
# Test imports still work
python -c "from sl.datasets.nums_dataset import PromptGenerator; print('✅ Imports work')"

# Test main scripts
python scripts/test_role_assume.py
python scripts/generate_teacher_conversations.py --help
python scripts/run_student_roleplay.py --help
python scripts/ablation_driver.py --help

# All should print help or run without errors
echo "✅ All tests passed!"
```

---

## Timeline

**Immediately (Recommended):**
- Execute Phase 1 cleanup commands
- Verify with test commands above

**Later (Optional):**
- Run Phase 2 if desired
- Consider refactoring `sl/` if it becomes a burden

---

## Questions?

- **What breaks if I delete X?** See `PROJECT_AUDIT.md`
- **How do I undo?** Use `git restore <path>` or `git checkout HEAD <path>`
- **Should I really delete all of this?** Yes, Phase 1 is safe. Optional for Phase 2.
- **What about the `sl/` library?** Keep it; only `nums_dataset.py` is used but the rest is harmless.

---

**Status:** Ready for cleanup! Just run the Phase 1 commands and you're good to go.
